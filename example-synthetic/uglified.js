const USE_GOT="undefined"==typeof $http;async function grabConfig(t,e,o,u,d){const s="US"==o?"https://api.newrelic.com/graphql":"https://api.eu.newrelic.com/graphql";"undefined"!=typeof $util&&$util.insights.set("configurator",u+"-"+t);o=await(async(t,e)=>{const o={method:"POST",headers:{"Content-Type":"application/json","API-Key":d,"NewRelic-Package-Id":u},body:JSON.stringify({query:t,variables:e})};let n;var c,a,r;n=USE_GOT?await got(s,o).json():(o.url=s,c=o,a=t=>t,"timeout"in c||(c.timeout=1e4),await new Promise((n,r)=>{$http(c,function(t,e,o){t?r(`Connection error on url '${c.url}'`):200!=e.statusCode?(console.log(e.body),r("API did not respond with a 200 OK, got "+e.statusCode)):n(a(o,e,t))})}));let i={};try{return(i=null===(r=n)||"function"!=typeof r&&"object"!=typeof r?JSON.parse(n):n).errors&&0<i.errors.length&&(GQL_ERROR_DETECTED=!0,console.log("!! GQL Query error detected:",i.errors)),i}catch(t){console.log("Error: Response from New Relic failed to parse as JSON.",t)}})('query($accountId: Int!, $documentId: String!) {actor {account(id: $accountId){nerdStorage{document(collection: "SyntheticConfigurator",documentId:$documentId)}}}}',{accountId:parseInt(e),documentId:t});return JSON.parse(o.data.actor.account.nerdStorage.document.config)}USE_GOT&&(got=require("got"));